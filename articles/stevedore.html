<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using docker with stevedore • stevedore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using docker with stevedore">
<meta property="og:description" content="stevedore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stevedore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/stevedore.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cookbook.html">Cookbook</a>
    </li>
    <li>
      <a href="../articles/examples.html">Examples and use-cases</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/richfitz/stevedore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using docker with stevedore</h1>
                        <h4 data-toc-skip class="author">Rich
FitzJohn</h4>
            
            <h4 data-toc-skip class="date">2020-01-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/richfitz/stevedore/blob/HEAD/vignettes/stevedore.Rmd" class="external-link"><code>vignettes/stevedore.Rmd</code></a></small>
      <div class="hidden name"><code>stevedore.Rmd</code></div>

    </div>

    
    
<p><code>stevedore</code> is an R package for interacting with docker
from R. With <code>stevedore</code> you can</p>
<ul>
<li>create, run, manage, remove and destroy containers</li>
<li>build, pull, manage and remove images</li>
<li>create, destroy and interact with docker networks</li>
<li>create, destroy and interact with docker volumes</li>
</ul>
<p>Almost everything that can be done with the docker command line
client (the main exception being that is not possible to send input to a
container as if you were on a terminal).</p>
<p><code>stevedore</code> directly interacts with the docker server over
its HTTP API. This gives a more direct access to docker than going via
the command line.</p>
<p>This vignette quickly walks through the core features of the package.
Because <code>stevedore</code> wraps the docker API directly there are
many more arguments that can be used than are covered here. But this
covers the core use.</p>
<p>The main function in the package is <code>docker_client</code>; this
will construct an object with which we can talk with the docker server.
By default this will look at a number of environment variables and try
to connect to the correct daemon. See <code><a href="../reference/docker_client.html">?docker_client</a></code> for
information on controlling creating the connection.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span> <span class="op">&lt;-</span> <span class="fu">stevedore</span><span class="fu">::</span><span class="fu"><a href="../reference/docker_client.html">docker_client</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The client object looks a lot like an <a href="https://github.com/r-lib/R6/" class="external-link"><code>R6</code></a> object (though
it is implemented differently because the interface here is
automatically generated in ways that don’t play nicely with R6). But if
you are at all familiar with R6 objects it should seem quite
familiar.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_client&gt;</span></span>
<span><span class="co">##   config: Manage docker swarm configs</span></span>
<span><span class="co">##   container: Work with docker containers</span></span>
<span><span class="co">##   image: Work with docker images</span></span>
<span><span class="co">##   network: Work with docker networks</span></span>
<span><span class="co">##   node: Manage docker swarm nodes</span></span>
<span><span class="co">##   plugin: Work with docker plugins</span></span>
<span><span class="co">##   secret: Manage docker swarm secrets</span></span>
<span><span class="co">##   service: Work with docker services</span></span>
<span><span class="co">##   swarm: Manage the docker swarm</span></span>
<span><span class="co">##   task: Work with docker tasks</span></span>
<span><span class="co">##   volume: Work with docker volumes</span></span>
<span><span class="co">##   types: Methods for building complex docker types</span></span>
<span><span class="co">##   api_version()</span></span>
<span><span class="co">##   connection_info()</span></span>
<span><span class="co">##   cp(src, dest)</span></span>
<span><span class="co">##   df()</span></span>
<span><span class="co">##   events(since = NULL, until = NULL, filters = NULL)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   info()</span></span>
<span><span class="co">##   login(username = NULL, password = NULL, email = NULL,</span></span>
<span><span class="co">##       serveraddress = NULL)</span></span>
<span><span class="co">##   ping()</span></span>
<span><span class="co">##   request(verb, path, query = NULL, body = NULL, headers = NULL,</span></span>
<span><span class="co">##       stream = NULL)</span></span>
<span><span class="co">##   version()</span></span></code></pre>
<p>Each function call (e.g., <code>ping</code>) is callable by accessing
with <code>$</code>, such as</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="fu">ping</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "OK"</span></span>
<span><span class="co">## attr(,"api_version")</span></span>
<span><span class="co">## [1] "1.39"</span></span>
<span><span class="co">## attr(,"buildkit_version")</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">## attr(,"docker_experimental")</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre>
<p>In addition there are “collection” objects (e.g.,
<code>container</code>) that are accessed using <code>$</code>, like a
directory structure</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_container_collection&gt;</span></span>
<span><span class="co">##   create(image, cmd = NULL, hostname = NULL, domainname = NULL,</span></span>
<span><span class="co">##       user = NULL, attach_stdin = NULL, attach_stdout = NULL,</span></span>
<span><span class="co">##       attach_stderr = NULL, ports = NULL, tty = NULL,</span></span>
<span><span class="co">##       open_stdin = NULL, stdin_once = NULL, env = NULL,</span></span>
<span><span class="co">##       health_check = NULL, args_escaped = NULL, volumes = NULL,</span></span>
<span><span class="co">##       working_dir = NULL, entrypoint = NULL, network_disabled = NULL,</span></span>
<span><span class="co">##       mac_address = NULL, on_build = NULL, labels = NULL,</span></span>
<span><span class="co">##       stop_signal = NULL, stop_timeout = NULL, shell = NULL,</span></span>
<span><span class="co">##       host_config = NULL, network = NULL, name = NULL)</span></span>
<span><span class="co">##   get(id)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   list(all = NULL, limit = NULL, size = NULL, filters = NULL)</span></span>
<span><span class="co">##   prune(filters = NULL)</span></span>
<span><span class="co">##   remove(id, delete_volumes = NULL, force = NULL, link = NULL)</span></span>
<span><span class="co">##   run(image, cmd = NULL, ..., detach = FALSE, rm = FALSE,</span></span>
<span><span class="co">##       stream = stdout(), host_config = NULL)</span></span></code></pre>
<p>The interface is designed similarly to the command line docker client
(and to the Python docker client), where container commands are within
the <code>container</code> collection and image commands are within the
<code>image</code> collection and so on (the main difference with the
command line client is that the container commands are not at the top
level, so it is <code>docker$container$run(...)</code> not
<code>docker$run(...)</code>).</p>
<p>To run a container, the <code>docker$container$run</code> command
follows the semantics of the command line client and will</p>
<ul>
<li>pull a image if it does not exist</li>
<li>create the container</li>
<li>run the container</li>
<li>fetch the logs</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"hello-world"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; Hello from Docker!</span></span>
<span><span class="co">## O&gt; This message shows that your installation appears to be working correctly.</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; To generate this message, Docker took the following steps:</span></span>
<span><span class="co">## O&gt;  1. The Docker client contacted the Docker daemon.</span></span>
<span><span class="co">## O&gt;  2. The Docker daemon pulled the "hello-world" image from the Docker Hub.</span></span>
<span><span class="co">## O&gt;     (amd64)</span></span>
<span><span class="co">## O&gt;  3. The Docker daemon created a new container from that image which runs the</span></span>
<span><span class="co">## O&gt;     executable that produces the output you are currently reading.</span></span>
<span><span class="co">## O&gt;  4. The Docker daemon streamed that output to the Docker client, which sent it</span></span>
<span><span class="co">## O&gt;     to your terminal.</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; To try something more ambitious, you can run an Ubuntu container with:</span></span>
<span><span class="co">## O&gt;  $ docker run -it ubuntu bash</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; Share images, automate workflows, and more with a free Docker ID:</span></span>
<span><span class="co">## O&gt;  https://hub.docker.com/</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; For more examples and ideas, visit:</span></span>
<span><span class="co">## O&gt;  https://docs.docker.com/get-started/</span></span>
<span><span class="co">## O&gt;</span></span></code></pre>
<p>This returns a list with two elements:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "container" "logs"</span></span></code></pre>
<p>The “logs” element is the logs themselves:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">logs</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; Hello from Docker!</span></span>
<span><span class="co">## O&gt; This message shows that your installation appears to be working correctly.</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; To generate this message, Docker took the following steps:</span></span>
<span><span class="co">## O&gt;  1. The Docker client contacted the Docker daemon.</span></span>
<span><span class="co">## O&gt;  2. The Docker daemon pulled the "hello-world" image from the Docker Hub.</span></span>
<span><span class="co">## O&gt;     (amd64)</span></span>
<span><span class="co">## O&gt;  3. The Docker daemon created a new container from that image which runs the</span></span>
<span><span class="co">## O&gt;     executable that produces the output you are currently reading.</span></span>
<span><span class="co">## O&gt;  4. The Docker daemon streamed that output to the Docker client, which sent it</span></span>
<span><span class="co">## O&gt;     to your terminal.</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; To try something more ambitious, you can run an Ubuntu container with:</span></span>
<span><span class="co">## O&gt;  $ docker run -it ubuntu bash</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; Share images, automate workflows, and more with a free Docker ID:</span></span>
<span><span class="co">## O&gt;  https://hub.docker.com/</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; For more examples and ideas, visit:</span></span>
<span><span class="co">## O&gt;  https://docs.docker.com/get-started/</span></span>
<span><span class="co">## O&gt;</span></span></code></pre>
<p>This is a <code>docker_stream</code> object and codes the output
stream using the <code>stream</code> attribute (it can otherwise be
treated as a character vector).</p>
<p>The “container” element is an object that can be used to interact
with a container</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">container</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_container&gt;</span></span>
<span><span class="co">##   commit(repo = NULL, tag = NULL, author = NULL, changes = NULL,</span></span>
<span><span class="co">##       comment = NULL, pause = NULL, hostname = NULL, domainname = NULL,</span></span>
<span><span class="co">##       user = NULL, attach_stdin = NULL, attach_stdout = NULL,</span></span>
<span><span class="co">##       attach_stderr = NULL, exposed_ports = NULL, tty = NULL,</span></span>
<span><span class="co">##       open_stdin = NULL, stdin_once = NULL, env = NULL, cmd = NULL,</span></span>
<span><span class="co">##       healthcheck = NULL, args_escaped = NULL, image = NULL,</span></span>
<span><span class="co">##       volumes = NULL, working_dir = NULL, entrypoint = NULL,</span></span>
<span><span class="co">##       network_disabled = NULL, mac_address = NULL, on_build = NULL,</span></span>
<span><span class="co">##       labels = NULL, stop_signal = NULL, stop_timeout = NULL,</span></span>
<span><span class="co">##       shell = NULL)</span></span>
<span><span class="co">##   cp_in(src, dest)</span></span>
<span><span class="co">##   cp_out(src, dest)</span></span>
<span><span class="co">##   diff()</span></span>
<span><span class="co">##   exec(cmd, stdin = NULL, stdout = TRUE, stderr = TRUE,</span></span>
<span><span class="co">##       detach_keys = NULL, tty = NULL, env = NULL, privileged = NULL,</span></span>
<span><span class="co">##       user = NULL, working_dir = NULL, detach = FALSE,</span></span>
<span><span class="co">##       stream = stdout())</span></span>
<span><span class="co">##   exec_create(cmd, stdin = NULL, stdout = TRUE, stderr = TRUE,</span></span>
<span><span class="co">##       detach_keys = NULL, tty = NULL, env = NULL, privileged = NULL,</span></span>
<span><span class="co">##       user = NULL, working_dir = NULL)</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   get_archive(path, dest)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   image()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   kill(signal = NULL)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   logs(follow = NULL, stdout = TRUE, stderr = TRUE, since = NULL,</span></span>
<span><span class="co">##       until = NULL, timestamps = NULL, tail = NULL, stream = stdout())</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   path_stat(path)</span></span>
<span><span class="co">##   pause()</span></span>
<span><span class="co">##   ports(reload = TRUE)</span></span>
<span><span class="co">##   put_archive(src, path, no_overwrite_dir_non_dir = NULL)</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(delete_volumes = NULL, force = NULL, link = NULL)</span></span>
<span><span class="co">##   rename(name)</span></span>
<span><span class="co">##   resize(h = NULL, w = NULL)</span></span>
<span><span class="co">##   restart(t = NULL)</span></span>
<span><span class="co">##   start(detach_keys = NULL)</span></span>
<span><span class="co">##   stats()</span></span>
<span><span class="co">##   status(reload = TRUE)</span></span>
<span><span class="co">##   stop(t = NULL)</span></span>
<span><span class="co">##   top(ps_args = NULL)</span></span>
<span><span class="co">##   unpause()</span></span>
<span><span class="co">##   update(cpu_shares = NULL, memory = NULL, cgroup_parent = NULL,</span></span>
<span><span class="co">##       blkio_weight = NULL, blkio_weight_device = NULL,</span></span>
<span><span class="co">##       blkio_device_read_bps = NULL, blkio_device_write_bps = NULL,</span></span>
<span><span class="co">##       blkio_device_read_iops = NULL, blkio_device_write_iops = NULL,</span></span>
<span><span class="co">##       cpu_period = NULL, cpu_quota = NULL, cpu_realtime_period = NULL,</span></span>
<span><span class="co">##       cpu_realtime_runtime = NULL, cpuset_cpus = NULL,</span></span>
<span><span class="co">##       cpuset_mems = NULL, devices = NULL, device_cgroup_rules = NULL,</span></span>
<span><span class="co">##       disk_quota = NULL, kernel_memory = NULL,</span></span>
<span><span class="co">##       memory_reservation = NULL, memory_swap = NULL,</span></span>
<span><span class="co">##       memory_swappiness = NULL, nano_cpus = NULL,</span></span>
<span><span class="co">##       oom_kill_disable = NULL, init = NULL, pids_limit = NULL,</span></span>
<span><span class="co">##       ulimits = NULL, cpu_count = NULL, cpu_percent = NULL,</span></span>
<span><span class="co">##       io_maximum_iops = NULL, io_maximum_bandwidth = NULL,</span></span>
<span><span class="co">##       restart_policy = NULL)</span></span>
<span><span class="co">##   wait(condition = NULL)</span></span></code></pre>
<p>For example the function <code>path_stat</code> gets some information
about paths on the container:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">path_stat</span><span class="op">(</span><span class="st">"hello"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $name</span></span>
<span><span class="co">## [1] "hello"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $size</span></span>
<span><span class="co">## [1] 1840</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mode</span></span>
<span><span class="co">## [1] 509</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mtime</span></span>
<span><span class="co">## [1] "2019-01-01T01:27:56Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $linkTarget</span></span>
<span><span class="co">## [1] ""</span></span></code></pre>
<p>The image can also be returned</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">image</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">img</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_image&gt;</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   history()</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL, noprune = NULL)</span></span>
<span><span class="co">##   short_id()</span></span>
<span><span class="co">##   tag(repo, tag = NULL)</span></span>
<span><span class="co">##   tags(reload = TRUE)</span></span>
<span><span class="co">##   untag(repo_tag)</span></span></code></pre>
<p>which is another object with methods that can be invoked to find out
about the image, e.g.:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">history</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                        id</span></span>
<span><span class="co">## 1 sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e</span></span>
<span><span class="co">## 2                                                               &lt;missing&gt;</span></span>
<span><span class="co">##      created</span></span>
<span><span class="co">## 1 1546306167</span></span>
<span><span class="co">## 2 1546306167</span></span>
<span><span class="co">##                                                                                           created_by</span></span>
<span><span class="co">## 1                                                                  /bin/sh -c #(nop)  CMD ["/hello"]</span></span>
<span><span class="co">## 2 /bin/sh -c #(nop) COPY file:f77490f70ce51da25bd21bfc30cb5e1a24b2b65eb37d4af0c327ddc24f0986a6 in /</span></span>
<span><span class="co">##           tags size comment</span></span>
<span><span class="co">## 1 hello-wo....    0</span></span>
<span><span class="co">## 2              1840</span></span></code></pre>
<div class="section level2">
<h2 id="containers">Containers<a class="anchor" aria-label="anchor" href="#containers"></a>
</h2>
<p>The <code>$container</code> object includes methods for interacting
with containers:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_container_collection&gt;</span></span>
<span><span class="co">##   create(image, cmd = NULL, hostname = NULL, domainname = NULL,</span></span>
<span><span class="co">##       user = NULL, attach_stdin = NULL, attach_stdout = NULL,</span></span>
<span><span class="co">##       attach_stderr = NULL, ports = NULL, tty = NULL,</span></span>
<span><span class="co">##       open_stdin = NULL, stdin_once = NULL, env = NULL,</span></span>
<span><span class="co">##       health_check = NULL, args_escaped = NULL, volumes = NULL,</span></span>
<span><span class="co">##       working_dir = NULL, entrypoint = NULL, network_disabled = NULL,</span></span>
<span><span class="co">##       mac_address = NULL, on_build = NULL, labels = NULL,</span></span>
<span><span class="co">##       stop_signal = NULL, stop_timeout = NULL, shell = NULL,</span></span>
<span><span class="co">##       host_config = NULL, network = NULL, name = NULL)</span></span>
<span><span class="co">##   get(id)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   list(all = NULL, limit = NULL, size = NULL, filters = NULL)</span></span>
<span><span class="co">##   prune(filters = NULL)</span></span>
<span><span class="co">##   remove(id, delete_volumes = NULL, force = NULL, link = NULL)</span></span>
<span><span class="co">##   run(image, cmd = NULL, ..., detach = FALSE, rm = FALSE,</span></span>
<span><span class="co">##       stream = stdout(), host_config = NULL)</span></span></code></pre>
<p><code>$create</code> creates a new container (similar to
<code>docker container create</code> on the command line) but does not
start it.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"hello-world"</span>, name <span class="op">=</span> <span class="st">"hello-stevedore"</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_container&gt;</span></span>
<span><span class="co">##   commit(repo = NULL, tag = NULL, author = NULL, changes = NULL,</span></span>
<span><span class="co">##       comment = NULL, pause = NULL, hostname = NULL, domainname = NULL,</span></span>
<span><span class="co">##       user = NULL, attach_stdin = NULL, attach_stdout = NULL,</span></span>
<span><span class="co">##       attach_stderr = NULL, exposed_ports = NULL, tty = NULL,</span></span>
<span><span class="co">##       open_stdin = NULL, stdin_once = NULL, env = NULL, cmd = NULL,</span></span>
<span><span class="co">##       healthcheck = NULL, args_escaped = NULL, image = NULL,</span></span>
<span><span class="co">##       volumes = NULL, working_dir = NULL, entrypoint = NULL,</span></span>
<span><span class="co">##       network_disabled = NULL, mac_address = NULL, on_build = NULL,</span></span>
<span><span class="co">##       labels = NULL, stop_signal = NULL, stop_timeout = NULL,</span></span>
<span><span class="co">##       shell = NULL)</span></span>
<span><span class="co">##   cp_in(src, dest)</span></span>
<span><span class="co">##   cp_out(src, dest)</span></span>
<span><span class="co">##   diff()</span></span>
<span><span class="co">##   exec(cmd, stdin = NULL, stdout = TRUE, stderr = TRUE,</span></span>
<span><span class="co">##       detach_keys = NULL, tty = NULL, env = NULL, privileged = NULL,</span></span>
<span><span class="co">##       user = NULL, working_dir = NULL, detach = FALSE,</span></span>
<span><span class="co">##       stream = stdout())</span></span>
<span><span class="co">##   exec_create(cmd, stdin = NULL, stdout = TRUE, stderr = TRUE,</span></span>
<span><span class="co">##       detach_keys = NULL, tty = NULL, env = NULL, privileged = NULL,</span></span>
<span><span class="co">##       user = NULL, working_dir = NULL)</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   get_archive(path, dest)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   image()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   kill(signal = NULL)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   logs(follow = NULL, stdout = TRUE, stderr = TRUE, since = NULL,</span></span>
<span><span class="co">##       until = NULL, timestamps = NULL, tail = NULL, stream = stdout())</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   path_stat(path)</span></span>
<span><span class="co">##   pause()</span></span>
<span><span class="co">##   ports(reload = TRUE)</span></span>
<span><span class="co">##   put_archive(src, path, no_overwrite_dir_non_dir = NULL)</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(delete_volumes = NULL, force = NULL, link = NULL)</span></span>
<span><span class="co">##   rename(name)</span></span>
<span><span class="co">##   resize(h = NULL, w = NULL)</span></span>
<span><span class="co">##   restart(t = NULL)</span></span>
<span><span class="co">##   start(detach_keys = NULL)</span></span>
<span><span class="co">##   stats()</span></span>
<span><span class="co">##   status(reload = TRUE)</span></span>
<span><span class="co">##   stop(t = NULL)</span></span>
<span><span class="co">##   top(ps_args = NULL)</span></span>
<span><span class="co">##   unpause()</span></span>
<span><span class="co">##   update(cpu_shares = NULL, memory = NULL, cgroup_parent = NULL,</span></span>
<span><span class="co">##       blkio_weight = NULL, blkio_weight_device = NULL,</span></span>
<span><span class="co">##       blkio_device_read_bps = NULL, blkio_device_write_bps = NULL,</span></span>
<span><span class="co">##       blkio_device_read_iops = NULL, blkio_device_write_iops = NULL,</span></span>
<span><span class="co">##       cpu_period = NULL, cpu_quota = NULL, cpu_realtime_period = NULL,</span></span>
<span><span class="co">##       cpu_realtime_runtime = NULL, cpuset_cpus = NULL,</span></span>
<span><span class="co">##       cpuset_mems = NULL, devices = NULL, device_cgroup_rules = NULL,</span></span>
<span><span class="co">##       disk_quota = NULL, kernel_memory = NULL,</span></span>
<span><span class="co">##       memory_reservation = NULL, memory_swap = NULL,</span></span>
<span><span class="co">##       memory_swappiness = NULL, nano_cpus = NULL,</span></span>
<span><span class="co">##       oom_kill_disable = NULL, init = NULL, pids_limit = NULL,</span></span>
<span><span class="co">##       ulimits = NULL, cpu_count = NULL, cpu_percent = NULL,</span></span>
<span><span class="co">##       io_maximum_iops = NULL, io_maximum_bandwidth = NULL,</span></span>
<span><span class="co">##       restart_policy = NULL)</span></span>
<span><span class="co">##   wait(condition = NULL)</span></span></code></pre>
<p><code>$get</code> creates a <code>docker_container</code> object from
an container id or name:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"hello-stevedore"</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "25ba2590b21fac453aec605af5af7f1595d2169e1324254d97f5a08701b59e6c"</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span><span class="op">$</span><span class="fu">id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "25ba2590b21fac453aec605af5af7f1595d2169e1324254d97f5a08701b59e6c"</span></span></code></pre>
<p><code>$list()</code> lists containers (like <code>docker list</code>
on the command line) - by default showing only running containers</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] id               names            image            image_id</span></span>
<span><span class="co">##  [5] command          created          ports            size_rw</span></span>
<span><span class="co">##  [9] size_root_fs     labels           state            status</span></span>
<span><span class="co">## [13] host_config      network_settings mounts           name</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span>, limit <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                 id</span></span>
<span><span class="co">## 1 25ba2590b21fac453aec605af5af7f1595d2169e1324254d97f5a08701b59e6c</span></span>
<span><span class="co">## 2 e414940048abbea2a66c33fb5191cc881764955ae0b9110ab48ce29cc29ddcce</span></span>
<span><span class="co">##          names</span></span>
<span><span class="co">## 1 hello-st....</span></span>
<span><span class="co">## 2 frosty_b....</span></span>
<span><span class="co">##                                                                     image</span></span>
<span><span class="co">## 1                                                             hello-world</span></span>
<span><span class="co">## 2 sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e</span></span>
<span><span class="co">##                                                                  image_id</span></span>
<span><span class="co">## 1 sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e</span></span>
<span><span class="co">## 2 sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e</span></span>
<span><span class="co">##   command    created        ports size_rw size_root_fs labels   state</span></span>
<span><span class="co">## 1  /hello 1578823525 characte....      NA           NA        created</span></span>
<span><span class="co">## 2  /hello 1578823523 characte....      NA           NA         exited</span></span>
<span><span class="co">##                    status host_config network_settings       mounts</span></span>
<span><span class="co">## 1                 Created     default     list(bri.... characte....</span></span>
<span><span class="co">## 2 Exited (0) 1 second ago     default     list(bri.... characte....</span></span>
<span><span class="co">##              name</span></span>
<span><span class="co">## 1 hello-stevedore</span></span>
<span><span class="co">## 2   frosty_banzai</span></span></code></pre>
<p><code>$remove()</code> removes a container by name or id:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="st">"hello-stevedore"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<p><code>$prune()</code> removes non-running containers (i.e.,
containers that have exited or containers that have been created but not
yet started)</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">prune</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $containers_deleted</span></span>
<span><span class="co">## [1] "e414940048abbea2a66c33fb5191cc881764955ae0b9110ab48ce29cc29ddcce"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $space_reclaimed</span></span>
<span><span class="co">## [1] 0</span></span></code></pre>
<div class="section level3">
<h3 id="working-with-containers">Working with containers<a class="anchor" aria-label="anchor" href="#working-with-containers"></a>
</h3>
<p>After creating a container object, there are many more methods to use
- all apply to the individual container</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"richfitz/iterate"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1000"</span>, <span class="st">"1"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Most are analogues of similarly named <code>docker</code> command
line functions.</p>
<p>First, there are some basic query methods - <code>$id()</code>,
<code>$name()</code> and <code>$labels()</code></p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "b553018482d2e4119e20c9ccc54fd7a14e6aa7843f630a5266548f31d755211d"</span></span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">name</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "angry_snyder"</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">labels</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## stevedore_version</span></span>
<span><span class="co">##           "0.0.1"</span></span></code></pre>
<p>More detailed information (<strong>much</strong> more detailed) can
be retrieved with the <code>$inspect()</code> method</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">inspect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "b553018482d2e4119e20c9ccc54fd7a14e6aa7843f630a5266548f31d755211d"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2020-01-12T10:05:25.3062459Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $path</span></span>
<span><span class="co">## [1] "/usr/local/bin/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $args</span></span>
<span><span class="co">## [1] "1000" "1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state</span></span>
<span><span class="co">## $state$status</span></span>
<span><span class="co">## [1] "created"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$running</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$paused</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$restarting</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$oom_killed</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$dead</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$pid</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$exit_code</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$error</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$started_at</span></span>
<span><span class="co">## [1] "0001-01-01T00:00:00Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $state$finished_at</span></span>
<span><span class="co">## [1] "0001-01-01T00:00:00Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $image</span></span>
<span><span class="co">## [1] "sha256:56b0d98ceb5a402ea61c63ab94a8e7f305cde36e3aa8f080a0b7ab1a8a659e7c"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $resolv_conf_path</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $hostname_path</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $hosts_path</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $log_path</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $node</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $name</span></span>
<span><span class="co">## [1] "/angry_snyder"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $restart_count</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver</span></span>
<span><span class="co">## [1] "overlay2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mount_label</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $process_label</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $app_armor_profile</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $exec_ids</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config</span></span>
<span><span class="co">## $host_config$cpu_shares</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$memory</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cgroup_parent</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_weight</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_weight_device</span></span>
<span><span class="co">## [1] path   weight</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_device_read_bps</span></span>
<span><span class="co">## [1] path rate</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_device_write_bps</span></span>
<span><span class="co">## [1] path rate</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_device_read_iops</span></span>
<span><span class="co">## [1] path rate</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$blkio_device_write_iops</span></span>
<span><span class="co">## [1] path rate</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_period</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_quota</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_realtime_period</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_realtime_runtime</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpuset_cpus</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpuset_mems</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$devices</span></span>
<span><span class="co">## [1] path_on_host       path_in_container  cgroup_permissions</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$device_cgroup_rules</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$disk_quota</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$kernel_memory</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$memory_reservation</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$memory_swap</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$memory_swappiness</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$nano_cpus</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$oom_kill_disable</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$init</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$pids_limit</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$ulimits</span></span>
<span><span class="co">## [1] name soft hard</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_count</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cpu_percent</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$io_maximum_iops</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$io_maximum_bandwidth</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$binds</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$container_idfile</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$log_config</span></span>
<span><span class="co">## $host_config$log_config$type</span></span>
<span><span class="co">## [1] "json-file"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$log_config$config</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$network_mode</span></span>
<span><span class="co">## [1] "default"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$port_bindings</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$restart_policy</span></span>
<span><span class="co">## $host_config$restart_policy$name</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$restart_policy$maximum_retry_count</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$auto_remove</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$volume_driver</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$volumes_from</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$mounts</span></span>
<span><span class="co">## [1] target         source         type           read_only</span></span>
<span><span class="co">## [5] consistency    bind_options   volume_options tmpfs_options</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cap_add</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cap_drop</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$dns</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$dns_options</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$dns_search</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$extra_hosts</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$group_add</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$ipc_mode</span></span>
<span><span class="co">## [1] "shareable"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$cgroup</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$links</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$oom_score_adj</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$pid_mode</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$privileged</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$publish_all_ports</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$readonly_rootfs</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$security_opt</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$storage_opt</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$tmpfs</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$uts_mode</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$userns_mode</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$shm_size</span></span>
<span><span class="co">## [1] 67108864</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$sysctls</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$runtime</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$console_size</span></span>
<span><span class="co">## [1] 0 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$isolation</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$masked_paths</span></span>
<span><span class="co">##  [1] "/proc/asound"        "/proc/acpi"          "/proc/kcore"</span></span>
<span><span class="co">##  [4] "/proc/keys"          "/proc/latency_stats" "/proc/timer_list"</span></span>
<span><span class="co">##  [7] "/proc/timer_stats"   "/proc/sched_debug"   "/proc/scsi"</span></span>
<span><span class="co">## [10] "/sys/firmware"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $host_config$readonly_paths</span></span>
<span><span class="co">## [1] "/proc/bus"           "/proc/fs"            "/proc/irq"</span></span>
<span><span class="co">## [4] "/proc/sys"           "/proc/sysrq-trigger"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $graph_driver</span></span>
<span><span class="co">## $graph_driver$name</span></span>
<span><span class="co">## [1] "overlay2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $graph_driver$data</span></span>
<span><span class="co">##                                                                                                                                                                                                                                                                                           lower_dir</span></span>
<span><span class="co">## "/var/lib/docker/overlay2/2ac2803a954a813a808e9c1d1f63edf0153ef0dbc109d1c12db372dc2c1104d7-init/diff:/var/lib/docker/overlay2/530d1f73dec177ad03a0ee31ad04d0802bf29925cd2eed2b8e5f49258c6824a3/diff:/var/lib/docker/overlay2/e1a21604d525ede2c5e9e6d59ac7dceb33bc7469ad98cc9997477a38c310305c/diff"</span></span>
<span><span class="co">##                                                                                                                                                                                                                                                                                          merged_dir</span></span>
<span><span class="co">##                                                                                                                                                                                                  "/var/lib/docker/overlay2/2ac2803a954a813a808e9c1d1f63edf0153ef0dbc109d1c12db372dc2c1104d7/merged"</span></span>
<span><span class="co">##                                                                                                                                                                                                                                                                                           upper_dir</span></span>
<span><span class="co">##                                                                                                                                                                                                    "/var/lib/docker/overlay2/2ac2803a954a813a808e9c1d1f63edf0153ef0dbc109d1c12db372dc2c1104d7/diff"</span></span>
<span><span class="co">##                                                                                                                                                                                                                                                                                            work_dir</span></span>
<span><span class="co">##                                                                                                                                                                                                    "/var/lib/docker/overlay2/2ac2803a954a813a808e9c1d1f63edf0153ef0dbc109d1c12db372dc2c1104d7/work"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $size_rw</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $size_root_fs</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mounts</span></span>
<span><span class="co">## [1] type        name        source      destination driver      mode</span></span>
<span><span class="co">## [7] rw          propagation</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config</span></span>
<span><span class="co">## $config$hostname</span></span>
<span><span class="co">## [1] "b553018482d2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$domainname</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$user</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stdout</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stderr</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$exposed_ports</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$tty</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$open_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stdin_once</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$env</span></span>
<span><span class="co">## [1] "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$cmd</span></span>
<span><span class="co">## [1] "1000" "1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$healthcheck</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$args_escaped</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$image</span></span>
<span><span class="co">## [1] "richfitz/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$volumes</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$working_dir</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$entrypoint</span></span>
<span><span class="co">## [1] "/usr/local/bin/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$network_disabled</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$mac_address</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$on_build</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$labels</span></span>
<span><span class="co">## stevedore_version</span></span>
<span><span class="co">##           "0.0.1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stop_signal</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stop_timeout</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$shell</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings</span></span>
<span><span class="co">## $network_settings$bridge</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$sandbox_id</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$hairpin_mode</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$link_local_ipv6_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$link_local_ipv6_prefix_len</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$ports</span></span>
<span><span class="co">## list()</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$sandbox_key</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$secondary_ipaddresses</span></span>
<span><span class="co">## [1] addr       prefix_len</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$secondary_ipv6_addresses</span></span>
<span><span class="co">## [1] addr       prefix_len</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$endpoint_id</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$gateway</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$global_ipv6_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$global_ipv6_prefix_len</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$ip_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$ip_prefix_len</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$ipv6_gateway</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$mac_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks</span></span>
<span><span class="co">## $network_settings$networks$bridge</span></span>
<span><span class="co">## $network_settings$networks$bridge$ipam_config</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$links</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$aliases</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$network_id</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$endpoint_id</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$gateway</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$ip_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$ip_prefix_len</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$ipv6_gateway</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$global_ipv6_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$global_ipv6_prefix_len</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$mac_address</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $network_settings$networks$bridge$driver_opts</span></span>
<span><span class="co">## NULL</span></span></code></pre>
<p>The image used by a container can be retrieved with the
<code>$image()</code> method</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">image</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_image&gt;</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   history()</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL, noprune = NULL)</span></span>
<span><span class="co">##   short_id()</span></span>
<span><span class="co">##   tag(repo, tag = NULL)</span></span>
<span><span class="co">##   tags(reload = TRUE)</span></span>
<span><span class="co">##   untag(repo_tag)</span></span></code></pre>
<p>(see below for working with images).</p>
<p>The status of the container (<code>created</code>,
<code>running</code>, <code>exited</code>, <code>paused</code>, etc) can
be read with <code>$status()</code></p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "created"</span></span></code></pre>
<p>The container created by by <code>$create</code> is not running - the
<code>$start()</code> method will start it:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "running"</span></span></code></pre>
<p>Once the container is running we can query to see what processes are
running in it with <code>$top</code> (standing for Table Of
Processes)</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">top</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    PID USER TIME                                         COMMAND</span></span>
<span><span class="co">## 1 2918 root 0:00 {iterate} /bin/sh /usr/local/bin/iterate 1000 1</span></span>
<span><span class="co">## 2 2953 root 0:00                                         sleep 1</span></span></code></pre>
<p>We can also get the logs:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">logs</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; Doing 1000 iterations with interval 1</span></span>
<span><span class="co">## O&gt; Iteration 1...</span></span></code></pre>
<p>This returns a special object type <code>docker_stream</code> which
allows control over formatting with <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code> - the
<code>style</code> argument controls how stderr and stdout are printed.
There is a <code>stream</code> attribute that can be used to separate
out lines too. If a tty was allocated with <code>tty = TRUE</code> the
output will be a plain character vector</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="fu">logs</span><span class="op">(</span><span class="op">)</span>, style <span class="op">=</span> <span class="st">"plain"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Doing 1000 iterations with interval 1\n"</span></span>
<span><span class="co">## [2] "Iteration 1...\n"</span></span></code></pre>
<p>It can generally be treated as a character vector:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">logs</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Doing 1000 iterations with interval 1\n"</span></span>
<span><span class="co">## [2] "Iteration 1...\n"</span></span></code></pre>
<p>The <code>$logs()</code> method can be used to do a blocking wait on
a container. Pass <code>follow = TRUE</code> to follow the logs. You
will want to provide a <code>stream</code> argument too, which is where
to stream the log to. This can be <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout()</a></code> or
<code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stderr()</a></code>, a file or an R connection.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"richfitz/iterate"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10"</span>, <span class="st">"0.1"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">$</span><span class="fu">logs</span><span class="op">(</span>stream <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout</a></span><span class="op">(</span><span class="op">)</span>, follow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; Doing 10 iterations with interval 0.1</span></span>
<span><span class="co">## O&gt; Iteration 1...</span></span>
<span><span class="co">## O&gt; Iteration 2...</span></span>
<span><span class="co">## O&gt; Iteration 3...</span></span>
<span><span class="co">## O&gt; Iteration 4...</span></span>
<span><span class="co">## O&gt; Iteration 5...</span></span>
<span><span class="co">## O&gt; Iteration 6...</span></span>
<span><span class="co">## O&gt; Iteration 7...</span></span>
<span><span class="co">## O&gt; Iteration 8...</span></span>
<span><span class="co">## O&gt; Iteration 9...</span></span>
<span><span class="co">## O&gt; Iteration 10...</span></span>
<span><span class="co">## O&gt; Done!</span></span></code></pre>
<p>If running this interactively, the logs will print one line at a time
- once control returns to R the container has exited. You can escape
this streaming using whatever method you use to interrupt an R
calculation (depends on which GUI/IDE you are using) but the container
will continue regardless - we are just <em>observing</em> a running
container.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "exited"</span></span></code></pre>
<p>The other way of blocking until a container has finished is with
<code>$wait()</code> which blocks until the container exits, then
returns the exit code.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $exit_code</span></span>
<span><span class="co">## [1] 0</span></span></code></pre>
<p>Calling <code>$wait()</code> on an exited container is fine, and will
just return immediately:</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $exit_code</span></span>
<span><span class="co">## [1] 0</span></span></code></pre>
<p>Containers can be paused with <code>$pause()</code></p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">pause</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "paused"</span></span></code></pre>
<p>Once paused, they can be restarted with <code>$unpause()</code></p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">unpause</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "running"</span></span></code></pre>
<p>Additionally, containers can be <em>restarted</em> with
<code>$restart()</code></p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">restart</span><span class="op">(</span>t <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">logs</span><span class="op">(</span>tail <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; Iteration 4...</span></span>
<span><span class="co">## O&gt; Iteration 5...</span></span>
<span><span class="co">## O&gt; Iteration 6...</span></span>
<span><span class="co">## O&gt; Doing 1000 iterations with interval 1</span></span>
<span><span class="co">## O&gt; Iteration 1...</span></span></code></pre>
<p>Containers can be stopped with <code>$stop()</code> and removed with
<code>$remove()</code> (calling <code>$remove(force = TRUE)</code> will
kill the container before removing.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span>t <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<p>Once a container has been removed most methods will not work
properly:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: No such container: b553018482d2e4119e20c9ccc54fd7a14e6aa7843f630a5266548f31d755211d</span></span></code></pre>
<p>Information about ports (for containers that expose them) can be
retrieved with <code>$ports()</code>. The <code>nginx</code> image
creates a web server/proxy that exposes port 80 from the container. We
can map that to a random port by asking docker to expose port 80 but not
saying what to map it to:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nginx</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"nginx"</span>, ports <span class="op">=</span> <span class="fl">80</span>,</span>
<span>                              detach <span class="op">=</span> <span class="cn">TRUE</span>, rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              name <span class="op">=</span> <span class="st">"stevedore-nginx"</span><span class="op">)</span></span>
<span><span class="va">nginx</span><span class="op">$</span><span class="fu">ports</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   container_port protocol host_ip host_port</span></span>
<span><span class="co">## 1             80      tcp 0.0.0.0     32768</span></span></code></pre>
<p>(alternatively, use <code>ports = TRUE</code> to act like
<code>docker run</code>’s <code>-P</code> and “publish all ports to
random ports).</p>
<p>This shows that the port exposed by the the container (80) is mapped
to the port 32768 on the host. We can use this to communicate with the
server:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"http://localhost:%s"</span>, <span class="va">nginx</span><span class="op">$</span><span class="fu">ports</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">host_port</span><span class="op">)</span></span>
<span><span class="fu">curl</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/curl/man/parse_headers.html" class="external-link">parse_headers</a></span><span class="op">(</span><span class="fu">curl</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/curl/man/curl_fetch.html" class="external-link">curl_fetch_memory</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span><span class="op">$</span><span class="va">headers</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "HTTP/1.1 200 OK"</span></span>
<span><span class="co">## [2] "Server: nginx/1.17.7"</span></span>
<span><span class="co">## [3] "Date: Sun, 12 Jan 2020 10:05:34 GMT"</span></span>
<span><span class="co">## [4] "Content-Type: text/html"</span></span>
<span><span class="co">## [5] "Content-Length: 612"</span></span>
<span><span class="co">## [6] "Last-Modified: Tue, 24 Dec 2019 13:07:53 GMT"</span></span>
<span><span class="co">## [7] "Connection: keep-alive"</span></span>
<span><span class="co">## [8] "ETag: \"5e020da9-264\""</span></span>
<span><span class="co">## [9] "Accept-Ranges: bytes"</span></span></code></pre>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nginx</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span>t <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="run-commands-in-running-containers-with-exec">Run commands in running containers with <code>exec</code><a class="anchor" aria-label="anchor" href="#run-commands-in-running-containers-with-exec"></a>
</h2>
<p>With the command-line tool,
<code>docker exec &lt;container name&gt; &lt;command&gt;</code> lets you
run an arbitrary command within a running container.
<code>stevedore</code> does this with the <code>exec</code> method of a
container object.</p>
<p>Reasons for doing this include debugging (using arbitrary commands to
inspect/interact with a container while it does its primary task) but it
can also be used in deployment (e.g., sending a “go” signal after
copying files into the container).</p>
<p>To demonstrate, we need a long running container:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"richfitz/iterate"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1000"</span>, <span class="st">"10"</span><span class="op">)</span>,</span>
<span>                          detach <span class="op">=</span> <span class="cn">TRUE</span>, rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "running"</span></span></code></pre>
<p>With the container running we can run additional commands:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">$</span><span class="fu">exec</span><span class="op">(</span><span class="st">"ls"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; bin</span></span>
<span><span class="co">## O&gt; dev</span></span>
<span><span class="co">## O&gt; etc</span></span>
<span><span class="co">## O&gt; home</span></span>
<span><span class="co">## O&gt; lib</span></span>
<span><span class="co">## O&gt; media</span></span>
<span><span class="co">## O&gt; mnt</span></span>
<span><span class="co">## O&gt; opt</span></span>
<span><span class="co">## O&gt; proc</span></span>
<span><span class="co">## O&gt; root</span></span>
<span><span class="co">## O&gt; run</span></span>
<span><span class="co">## O&gt; sbin</span></span>
<span><span class="co">## O&gt; srv</span></span>
<span><span class="co">## O&gt; sys</span></span>
<span><span class="co">## O&gt; tmp</span></span>
<span><span class="co">## O&gt; usr</span></span>
<span><span class="co">## O&gt; var</span></span></code></pre>
<p>This streams the output of the command by default (to the connection
indicated by the <code>stream</code>) argument. Output is also returned
as part of the object:</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "62e5e653b88bda606b07b286bd27ca8d0b653e3000e76004463b609974722d0e"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $exit_code</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details</span></span>
<span><span class="co">## $details$can_remove</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$detach_keys</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$id</span></span>
<span><span class="co">## [1] "62e5e653b88bda606b07b286bd27ca8d0b653e3000e76004463b609974722d0e"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$running</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$exit_code</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$process_config</span></span>
<span><span class="co">## $details$process_config$privileged</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$process_config$user</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$process_config$tty</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$process_config$entrypoint</span></span>
<span><span class="co">## [1] "ls"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$process_config$arguments</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$open_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$open_stderr</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$open_stdout</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$container_id</span></span>
<span><span class="co">## [1] "9317cd764a3c2648de3d284ea084466afc1512fba48625233498ee1dc9754da2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $details$pid</span></span>
<span><span class="co">## [1] 3673</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $output</span></span>
<span><span class="co">## O&gt; bin</span></span>
<span><span class="co">## O&gt; dev</span></span>
<span><span class="co">## O&gt; etc</span></span>
<span><span class="co">## O&gt; home</span></span>
<span><span class="co">## O&gt; lib</span></span>
<span><span class="co">## O&gt; media</span></span>
<span><span class="co">## O&gt; mnt</span></span>
<span><span class="co">## O&gt; opt</span></span>
<span><span class="co">## O&gt; proc</span></span>
<span><span class="co">## O&gt; root</span></span>
<span><span class="co">## O&gt; run</span></span>
<span><span class="co">## O&gt; sbin</span></span>
<span><span class="co">## O&gt; srv</span></span>
<span><span class="co">## O&gt; sys</span></span>
<span><span class="co">## O&gt; tmp</span></span>
<span><span class="co">## O&gt; usr</span></span>
<span><span class="co">## O&gt; var</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="copy-files-into-and-out-of-containers">Copy files into and out of containers<a class="anchor" aria-label="anchor" href="#copy-files-into-and-out-of-containers"></a>
</h2>
<p>Just like <code>docker cp</code>, <code>stevedore</code> lets you
copy files into and out of containers. The logic mimics the logic in the
docker command line client as closely as possible.</p>
<p>To copy a file into our container <code>x</code>, use
<code>$cp_in</code></p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="va">path</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">cp_in</span><span class="op">(</span><span class="va">path</span>, <span class="st">"/hello"</span><span class="op">)</span></span></code></pre></div>
<p>And the new file is on the container</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">exec</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"/hello"</span><span class="op">)</span>, stream <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">$</span><span class="va">output</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; hello</span></span></code></pre>
<p>The input can be a single file or a single directory.</p>
<p>To copy out, use <code>$cp_out</code></p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">cp_out</span><span class="op">(</span><span class="st">"/usr/local/bin/iterate"</span>, <span class="va">dest</span><span class="op">)</span></span></code></pre></div>
<p>Here is the iterate script, from the container:</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">dest</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## #!/bin/sh</span></span>
<span><span class="co">## set -e</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## if [ "$#" -ge 1 ]; then</span></span>
<span><span class="co">##     TIMES=$1</span></span>
<span><span class="co">## else</span></span>
<span><span class="co">##     TIMES=10</span></span>
<span><span class="co">## fi</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## if [ "$#" -ge 2 ]; then</span></span></code></pre>
<p>There is also a convenience method at the root of the docker object
that behaves more like <code>docker cp</code> and requires that one of
the source or destination arguments is given in
<code>&lt;container&gt;:&lt;path&gt;</code> format:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">src</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="fu">name</span><span class="op">(</span><span class="op">)</span>, <span class="st">":/usr/local/bin/iterate"</span><span class="op">)</span></span>
<span><span class="va">src</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sad_ptolemy:/usr/local/bin/iterate"</span></span></code></pre>
<p>as</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dest2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">docker</span><span class="op">$</span><span class="fu">cp</span><span class="op">(</span><span class="va">src</span>, <span class="va">dest2</span><span class="op">)</span></span></code></pre></div>
<p>which achieves the same thing as the <code>$cp_out</code> command
above.</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/md5sum.html" class="external-link">md5sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dest</span>, <span class="va">dest2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "87bea4544cfd716dbab5030deb873b62" "87bea4544cfd716dbab5030deb873b62"</span></span></code></pre>
<p>(don’t forget to remove your detached containers later!)</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="images">Images<a class="anchor" aria-label="anchor" href="#images"></a>
</h2>
<div class="section level3">
<h3 id="pulling">Pulling<a class="anchor" aria-label="anchor" href="#pulling"></a>
</h3>
<p>Images can be directly pulled with <code>docker$image$pull</code>
providing an image name (as either <code>&lt;repo&gt;</code> or
<code>&lt;repo&gt;:&lt;tag&gt;</code>. If the image exists already this
will be quick, and if the network connection is down then this will
fail.</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">image</span><span class="op">$</span><span class="fu">pull</span><span class="op">(</span><span class="st">"bash:latest"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Pulling from library/bash latest</span></span>
<span><span class="co">## Already exists 89d9c30c1d48</span></span>
<span><span class="co">## Pulling fs layer 1cd014c0f09d</span></span>
<span><span class="co">## Pulling fs layer fed606654955</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 31.87 kB/3.17 MB 1%</span></span>
<span><span class="co">## fed606654955: Downloading 340 B/340 B 100%</span></span>
<span><span class="co">## Verifying Checksum fed606654955</span></span>
<span><span class="co">## Download complete fed606654955</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 228.48 kB/3.17 MB 7%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 588.92 kB/3.17 MB 19%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 1.08 MB/3.17 MB 34%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 1.41 MB/3.17 MB 44%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 1.75 MB/3.17 MB 55%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 2.08 MB/3.17 MB 65%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 2.42 MB/3.17 MB 76%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 2.75 MB/3.17 MB 87%</span></span>
<span><span class="co">## 1cd014c0f09d: Downloading 3.07 MB/3.17 MB 97%</span></span>
<span><span class="co">## Verifying Checksum 1cd014c0f09d</span></span>
<span><span class="co">## Download complete 1cd014c0f09d</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 32.77 kB/3.17 MB 1%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 262.14 kB/3.17 MB 8%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 2.16 MB/3.17 MB 68%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 2.98 MB/3.17 MB 94%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 3.05 MB/3.17 MB 96%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 3.15 MB/3.17 MB 99%</span></span>
<span><span class="co">## 1cd014c0f09d: Extracting 3.17 MB/3.17 MB 100%</span></span>
<span><span class="co">## Pull complete 1cd014c0f09d</span></span>
<span><span class="co">## fed606654955: Extracting 340 B/340 B 100%</span></span>
<span><span class="co">## fed606654955: Extracting 340 B/340 B 100%</span></span>
<span><span class="co">## Pull complete fed606654955</span></span>
<span><span class="co">## Digest: sha256:293ac2e5c5be7722d6f4aa620c6451aea359eec1f2f6d5c0faef948b86e449cd</span></span>
<span><span class="co">## Status: Downloaded newer image for bash:latest</span></span></code></pre>
<pre><code><span><span class="co">## &lt;docker_image&gt;</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   history()</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL, noprune = NULL)</span></span>
<span><span class="co">##   short_id()</span></span>
<span><span class="co">##   tag(repo, tag = NULL)</span></span>
<span><span class="co">##   tags(reload = TRUE)</span></span>
<span><span class="co">##   untag(repo_tag)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="the-object-returned-by-pull-is-an-image-object---that-can-be">The object returned by pull is an image object - that can be<a class="anchor" aria-label="anchor" href="#the-object-returned-by-pull-is-an-image-object---that-can-be"></a>
</h3>
</div>
<div class="section level3">
<h3 id="created-by-using-get">created by using <code>$get</code><a class="anchor" aria-label="anchor" href="#created-by-using-get"></a>
</h3>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">image</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"bash:latest"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="building">Building<a class="anchor" aria-label="anchor" href="#building"></a>
</h3>
<p>The other common way of getting images is to build them (the
equivalent of <code>docker build</code>). So if we have a path (here,
<code>iterate</code>) containing a Dockerfile:</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="st">"iterate"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Dockerfile" "iterate"</span></span></code></pre>
<p>The Dockerfile itself contains:</p>
<pre class="plain"><code>FROM alpine:latest
COPY iterate /usr/local/bin/iterate
CMD chmod +x /usr/local/bin/iterate
LABEL stevedore_version 0.0.1
ENTRYPOINT ["/usr/local/bin/iterate"]</code></pre>
<p>and the <code>iterate</code> file is an executable shell script
containing:</p>
<pre class="shell"><code>#!/bin/sh
set -e

if [ "$#" -ge 1 ]; then
    TIMES=$1
else
    TIMES=10
fi

if [ "$#" -ge 2 ]; then
    INTERVAL=$2
else
    INTERVAL=1
fi

echo "Doing $TIMES iterations with interval $INTERVAL"
i=0
while [ $i -lt $TIMES ]; do
    let i+=1
    echo "Iteration $i..."
    sleep $INTERVAL
done
echo "Done!"</code></pre>
<p>We can build this image using:</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">image</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="st">"iterate"</span>, tag <span class="op">=</span> <span class="st">"richfitz/iterate"</span>, nocache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Step 1/5 : FROM alpine:latest</span></span>
<span><span class="co">##  ---&gt; cc0abc535e36</span></span>
<span><span class="co">## Step 2/5 : COPY iterate /usr/local/bin/iterate</span></span>
<span><span class="co">##  ---&gt; bfead14674a0</span></span>
<span><span class="co">## Step 3/5 : CMD chmod +x /usr/local/bin/iterate</span></span>
<span><span class="co">##  ---&gt; Running in 3ffd8d1225b8</span></span>
<span><span class="co">## Removing intermediate container 3ffd8d1225b8</span></span>
<span><span class="co">##  ---&gt; d5b6a0eaa685</span></span>
<span><span class="co">## Step 4/5 : LABEL stevedore_version 0.0.1</span></span>
<span><span class="co">##  ---&gt; Running in c150ea2a1f95</span></span>
<span><span class="co">## Removing intermediate container c150ea2a1f95</span></span>
<span><span class="co">##  ---&gt; 346745e9ebc8</span></span>
<span><span class="co">## Step 5/5 : ENTRYPOINT ["/usr/local/bin/iterate"]</span></span>
<span><span class="co">##  ---&gt; Running in a17b554ff885</span></span>
<span><span class="co">## Removing intermediate container a17b554ff885</span></span>
<span><span class="co">##  ---&gt; 244154bfbb99</span></span>
<span><span class="co">## Successfully built 244154bfbb99</span></span>
<span><span class="co">## Successfully tagged richfitz/iterate:latest</span></span></code></pre>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_image&gt;</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   history()</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL, noprune = NULL)</span></span>
<span><span class="co">##   short_id()</span></span>
<span><span class="co">##   tag(repo, tag = NULL)</span></span>
<span><span class="co">##   tags(reload = TRUE)</span></span>
<span><span class="co">##   untag(repo_tag)</span></span></code></pre>
<p>The newly created image is returned as an image object and can be
used via <code>$container$run()</code></p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span></span>
<span>  <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="va">img</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10"</span>, <span class="st">"0.1"</span><span class="op">)</span>, rm <span class="op">=</span> <span class="cn">TRUE</span>, stream <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; Doing 10 iterations with interval 0.1</span></span>
<span><span class="co">## O&gt; Iteration 1...</span></span>
<span><span class="co">## O&gt; Iteration 2...</span></span>
<span><span class="co">## O&gt; Iteration 3...</span></span>
<span><span class="co">## O&gt; Iteration 4...</span></span>
<span><span class="co">## O&gt; Iteration 5...</span></span>
<span><span class="co">## O&gt; Iteration 6...</span></span>
<span><span class="co">## O&gt; Iteration 7...</span></span>
<span><span class="co">## O&gt; Iteration 8...</span></span>
<span><span class="co">## O&gt; Iteration 9...</span></span>
<span><span class="co">## O&gt; Iteration 10...</span></span>
<span><span class="co">## O&gt; Done!</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="importing">Importing<a class="anchor" aria-label="anchor" href="#importing"></a>
</h3>
<p>There is a third way of creating an image, which is to import it from
a tar archive. This is not yet documented (<strong>TODO</strong>) but
can be done via <code>$image$import()</code></p>
</div>
<div class="section level3">
<h3 id="working-with-image-objects">Working with image objects<a class="anchor" aria-label="anchor" href="#working-with-image-objects"></a>
</h3>
<p>Each image object has a number of methods.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">image</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"richfitz/iterate"</span><span class="op">)</span></span>
<span><span class="va">img</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_image&gt;</span></span>
<span><span class="co">##   export()</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   history()</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   labels(reload = TRUE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL, noprune = NULL)</span></span>
<span><span class="co">##   short_id()</span></span>
<span><span class="co">##   tag(repo, tag = NULL)</span></span>
<span><span class="co">##   tags(reload = TRUE)</span></span>
<span><span class="co">##   untag(repo_tag)</span></span></code></pre>
<p>The <code>$id()</code>, <code>$short_id()</code>,
<code>$labels()</code>, <code>$name()</code> and <code>$tags()</code>
query basic information about an image</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sha256:244154bfbb9995fc3c5fede726ec4c2679ba393375f2a8130ffd8537dcce3285"</span></span></code></pre>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">short_id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sha256:244154bfbb"</span></span></code></pre>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">labels</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## stevedore_version</span></span>
<span><span class="co">##           "0.0.1"</span></span></code></pre>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">name</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "richfitz/iterate"</span></span></code></pre>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">tags</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "richfitz/iterate:latest"</span></span></code></pre>
<p>(short_id<code>is always 10 characters long and does not include a leading</code>sha256:`).</p>
<p>The <code>inspect()</code> method returns detailed information about
the image</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">inspect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "sha256:244154bfbb9995fc3c5fede726ec4c2679ba393375f2a8130ffd8537dcce3285"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $repo_tags</span></span>
<span><span class="co">## [1] "richfitz/iterate:latest"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $repo_digests</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $parent</span></span>
<span><span class="co">## [1] "sha256:346745e9ebc8af6b623cdf5729ceddfd215e33d7886a7e72e71beba46d9bceca"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $comment</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2020-01-12T10:05:44.4499183Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container</span></span>
<span><span class="co">## [1] "a17b554ff885999f2bd26d6716e358fea4d3e01194986dca3c0e6c4b57c095db"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config</span></span>
<span><span class="co">## $container_config$hostname</span></span>
<span><span class="co">## [1] "a17b554ff885"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$domainname</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$user</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$attach_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$attach_stdout</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$attach_stderr</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$exposed_ports</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$tty</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$open_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$stdin_once</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$env</span></span>
<span><span class="co">## [1] "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$cmd</span></span>
<span><span class="co">## [1] "/bin/sh"</span></span>
<span><span class="co">## [2] "-c"</span></span>
<span><span class="co">## [3] "#(nop) "</span></span>
<span><span class="co">## [4] "ENTRYPOINT [\"/usr/local/bin/iterate\"]"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$healthcheck</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$args_escaped</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$image</span></span>
<span><span class="co">## [1] "sha256:346745e9ebc8af6b623cdf5729ceddfd215e33d7886a7e72e71beba46d9bceca"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$volumes</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$working_dir</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$entrypoint</span></span>
<span><span class="co">## [1] "/usr/local/bin/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$network_disabled</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$mac_address</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$on_build</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$labels</span></span>
<span><span class="co">## stevedore_version</span></span>
<span><span class="co">##           "0.0.1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$stop_signal</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$stop_timeout</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $container_config$shell</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $docker_version</span></span>
<span><span class="co">## [1] "18.09.2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $author</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config</span></span>
<span><span class="co">## $config$hostname</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$domainname</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$user</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stdout</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$attach_stderr</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$exposed_ports</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$tty</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$open_stdin</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stdin_once</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$env</span></span>
<span><span class="co">## [1] "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$cmd</span></span>
<span><span class="co">## [1] "/bin/sh"                         "-c"</span></span>
<span><span class="co">## [3] "chmod +x /usr/local/bin/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$healthcheck</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$args_escaped</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$image</span></span>
<span><span class="co">## [1] "sha256:346745e9ebc8af6b623cdf5729ceddfd215e33d7886a7e72e71beba46d9bceca"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$volumes</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$working_dir</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$entrypoint</span></span>
<span><span class="co">## [1] "/usr/local/bin/iterate"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$network_disabled</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$mac_address</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$on_build</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$labels</span></span>
<span><span class="co">## stevedore_version</span></span>
<span><span class="co">##           "0.0.1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stop_signal</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$stop_timeout</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $config$shell</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $architecture</span></span>
<span><span class="co">## [1] "amd64"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $os</span></span>
<span><span class="co">## [1] "linux"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $os_version</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $size</span></span>
<span><span class="co">## [1] 5591606</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $virtual_size</span></span>
<span><span class="co">## [1] 5591606</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $graph_driver</span></span>
<span><span class="co">## $graph_driver$name</span></span>
<span><span class="co">## [1] "overlay2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $graph_driver$data</span></span>
<span><span class="co">##                                                                                          lower_dir</span></span>
<span><span class="co">##   "/var/lib/docker/overlay2/e1a21604d525ede2c5e9e6d59ac7dceb33bc7469ad98cc9997477a38c310305c/diff"</span></span>
<span><span class="co">##                                                                                         merged_dir</span></span>
<span><span class="co">## "/var/lib/docker/overlay2/934d66f90f6c661634b1618ea61d7f0b87149631cb4715059b862e18c27eac1f/merged"</span></span>
<span><span class="co">##                                                                                          upper_dir</span></span>
<span><span class="co">##   "/var/lib/docker/overlay2/934d66f90f6c661634b1618ea61d7f0b87149631cb4715059b862e18c27eac1f/diff"</span></span>
<span><span class="co">##                                                                                           work_dir</span></span>
<span><span class="co">##   "/var/lib/docker/overlay2/934d66f90f6c661634b1618ea61d7f0b87149631cb4715059b862e18c27eac1f/work"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $root_fs</span></span>
<span><span class="co">## $root_fs$type</span></span>
<span><span class="co">## [1] "layers"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $root_fs$layers</span></span>
<span><span class="co">## [1] "sha256:6b27de954cca6332272e7709b7d8ceccee1489d9452af73391df360a26123580"</span></span>
<span><span class="co">## [2] "sha256:14794d0f3100e41f9a96e1d181db26e010ae56489b484f0abcc782dcfc438de5"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $root_fs$base_layer</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $metadata</span></span>
<span><span class="co">## $metadata$last_tag_time</span></span>
<span><span class="co">## [1] "2020-01-12T10:05:44.5147212Z"</span></span></code></pre>
<p>the exact format varies between docker API versions but should be the
same for all images within an API version.</p>
<p>The <code><a href="https://rdrr.io/r/utils/savehistory.html" class="external-link">history()</a></code> method returns a data.frame of information
about the history of an image (i.e., the layers that it is constructed
from)</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">history</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                        id</span></span>
<span><span class="co">## 1 sha256:244154bfbb9995fc3c5fede726ec4c2679ba393375f2a8130ffd8537dcce3285</span></span>
<span><span class="co">## 2 sha256:346745e9ebc8af6b623cdf5729ceddfd215e33d7886a7e72e71beba46d9bceca</span></span>
<span><span class="co">## 3 sha256:d5b6a0eaa685450861afb86bc00f05762bba84284ad2b36b252893f4c0972bb4</span></span>
<span><span class="co">## 4 sha256:bfead14674a0cf29a4cb48ee5b11d006b7451ddd098086bc3866ded70821cd8d</span></span>
<span><span class="co">## 5 sha256:cc0abc535e36a7ede71978ba2bbd8159b8a5420b91f2fbc520cdf5f673640a34</span></span>
<span><span class="co">## 6                                                               &lt;missing&gt;</span></span>
<span><span class="co">##      created</span></span>
<span><span class="co">## 1 1578823544</span></span>
<span><span class="co">## 2 1578823544</span></span>
<span><span class="co">## 3 1578823543</span></span>
<span><span class="co">## 4 1578823543</span></span>
<span><span class="co">## 5 1577215212</span></span>
<span><span class="co">## 6 1577215212</span></span>
<span><span class="co">##                                                                                                                created_by</span></span>
<span><span class="co">## 1                                                                /bin/sh -c #(nop)  ENTRYPOINT ["/usr/local/bin/iterate"]</span></span>
<span><span class="co">## 2                                                                        /bin/sh -c #(nop)  LABEL stevedore_version=0.0.1</span></span>
<span><span class="co">## 3                                               /bin/sh -c #(nop)  CMD ["/bin/sh" "-c" "chmod +x /usr/local/bin/iterate"]</span></span>
<span><span class="co">## 4 /bin/sh -c #(nop) COPY file:8b8ba7864a94787016cc3c519efd97a1c7dde8a1b64fec3d078096872b2ece4c in /usr/local/bin/iterate</span></span>
<span><span class="co">## 5                                                                                      /bin/sh -c #(nop)  CMD ["/bin/sh"]</span></span>
<span><span class="co">## 6                       /bin/sh -c #(nop) ADD file:36fdc8cb08228a87093fb227736f4ce1d4d6c15366326dea541fbbd863976ee5 in /</span></span>
<span><span class="co">##           tags    size comment</span></span>
<span><span class="co">## 1 richfitz....       0</span></span>
<span><span class="co">## 2                    0</span></span>
<span><span class="co">## 3                    0</span></span>
<span><span class="co">## 4                  306</span></span>
<span><span class="co">## 5 alpine:l....       0</span></span>
<span><span class="co">## 6              5591300</span></span></code></pre>
<p>(printing these objects is a real challenge!).</p>
<p>The <code>export()</code> method exports an image as a tar object.
There is some work still required to make this work nicely (currently it
returns a [potentially long] raw vector).</p>
<p>There are several methods that operate to modify or destroy the
image:</p>
<p>The <code>$tag()</code> method will tag an image, for example</p>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">tag</span><span class="op">(</span><span class="st">"richfitz/iterate"</span>, <span class="st">"0.0.1"</span><span class="op">)</span></span>
<span><span class="va">img</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">img</span><span class="op">$</span><span class="fu">tags</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "richfitz/iterate:0.0.1"  "richfitz/iterate:latest"</span></span></code></pre>
<p>While the <code>$untag()</code> method will remove a tag</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">untag</span><span class="op">(</span><span class="st">"richfitz/iterate:0.0.1"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>$remove()</code> method will remove an image - this returns
a data.frame indicating what actually happened (images are only actually
deleted if there are no other tags pointing at an image <em>and</em> if
<code>noprune</code> is not <code>TRUE</code>.</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                  untagged</span></span>
<span><span class="co">## 1 richfitz/iterate:latest</span></span>
<span><span class="co">## 2                    &lt;NA&gt;</span></span>
<span><span class="co">## 3                    &lt;NA&gt;</span></span>
<span><span class="co">## 4                    &lt;NA&gt;</span></span>
<span><span class="co">## 5                    &lt;NA&gt;</span></span>
<span><span class="co">## 6                    &lt;NA&gt;</span></span>
<span><span class="co">##                                                                   deleted</span></span>
<span><span class="co">## 1                                                                    &lt;NA&gt;</span></span>
<span><span class="co">## 2 sha256:244154bfbb9995fc3c5fede726ec4c2679ba393375f2a8130ffd8537dcce3285</span></span>
<span><span class="co">## 3 sha256:346745e9ebc8af6b623cdf5729ceddfd215e33d7886a7e72e71beba46d9bceca</span></span>
<span><span class="co">## 4 sha256:d5b6a0eaa685450861afb86bc00f05762bba84284ad2b36b252893f4c0972bb4</span></span>
<span><span class="co">## 5 sha256:bfead14674a0cf29a4cb48ee5b11d006b7451ddd098086bc3866ded70821cd8d</span></span>
<span><span class="co">## 6 sha256:ce1557b8602d2427fb71296d2c6ab9b05103d830cdf2eb5d45cdfe25c3ed11dd</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="volumes">Volumes<a class="anchor" aria-label="anchor" href="#volumes"></a>
</h2>
<p>Docker volumes provide a useful abstraction for interacting with
(possibly persistent) file volumes across containers. To create a volume
using <code>stevedore</code> (equivalent to
<code>docker volume create</code>) use
<code>$volume$create()</code>:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">volume</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"myvolume"</span><span class="op">)</span></span></code></pre></div>
<p>Volumes can be listed:</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">volume</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                               name driver</span></span>
<span><span class="co">## 1                                                         myvolume  local</span></span>
<span><span class="co">## 2 dc5d8f843c0fefd3e0c6a729e7326fe262c94aa50a49065448d7ef664c53a285  local</span></span>
<span><span class="co">##                                                                                       mountpoint</span></span>
<span><span class="co">## 1                                                         /var/lib/docker/volumes/myvolume/_data</span></span>
<span><span class="co">## 2 /var/lib/docker/volumes/dc5d8f843c0fefd3e0c6a729e7326fe262c94aa50a49065448d7ef664c53a285/_data</span></span>
<span><span class="co">##             created_at status labels scope options usage_data</span></span>
<span><span class="co">## 1 2020-01-12T10:05:47Z               local             NA, NA</span></span>
<span><span class="co">## 2 2019-12-23T08:27:51Z               local             NA, NA</span></span></code></pre>
<div class="section level3">
<h3 id="working-with-volume-objects">Working with volume objects<a class="anchor" aria-label="anchor" href="#working-with-volume-objects"></a>
</h3>
<p>There’s very little that can be done with volume objects:</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_volume&gt;</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   map(path, readonly = FALSE)</span></span>
<span><span class="co">##   name()</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove(force = NULL)</span></span></code></pre>
<p>We can get the name:</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span><span class="op">$</span><span class="fu">name</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "myvolume"</span></span></code></pre>
<p>Inspect the metadata</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span><span class="op">$</span><span class="fu">inspect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $name</span></span>
<span><span class="co">## [1] "myvolume"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver</span></span>
<span><span class="co">## [1] "local"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mountpoint</span></span>
<span><span class="co">## [1] "/var/lib/docker/volumes/myvolume/_data"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $created_at</span></span>
<span><span class="co">## [1] "2020-01-12T10:05:47Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $status</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $labels</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $scope</span></span>
<span><span class="co">## [1] "local"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $options</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $usage_data</span></span>
<span><span class="co">## NULL</span></span></code></pre>
<p>Generate mount definitions:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="st">"/comtainer/path"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "myvolume:/comtainer/path"</span></span></code></pre>
<p>and can remove the volume</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<p>everything else comes from using volumes with containers.</p>
<p>Containers are mounted the same way as from the docker command line -
with a string in the form <code>&lt;host&gt;:&lt;container&gt;</code>.
Here we can use the volume name on the host side, so saying
<code>&lt;myvolume&gt;:/myvolume</code> mounts our volume at
<code>/myvolume</code> within the container. This can be done easily
with the <code>$map()</code> method.</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vol</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">volume</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"myvolume"</span><span class="op">)</span></span>
<span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span></span>
<span>  <span class="st">"alpine:latest"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sh"</span>, <span class="st">"-c"</span>, <span class="st">"echo hello world &gt; /myvolume/output"</span><span class="op">)</span>,</span>
<span>  volumes <span class="op">=</span> <span class="va">vol</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="st">"/myvolume"</span><span class="op">)</span>,</span>
<span>  rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_run_output&gt;</span></span>
<span><span class="co">##   $container:</span></span>
<span><span class="co">##     &lt;docker_container&gt;</span></span>
<span><span class="co">##       id: 946dbe3f449dd8433847f1517af6106385ff1d31ed755f671ee10a732e31ac65</span></span>
<span><span class="co">##       name: determined_easley</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##   $logs:</span></span>
<span><span class="co">##</span></span></code></pre>
<p>(We use <code>sh -c</code> here so that the redirect operates within
the container - the third argument is evaluated by the shell within the
container and redirects the value that is echoed to a file.)</p>
<p>We can see the result of this by using a second container to read the
file:</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span></span>
<span>  <span class="st">"alpine:latest"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"/myvolume/output"</span><span class="op">)</span>,</span>
<span>  volumes <span class="op">=</span> <span class="va">vol</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="st">"/myvolume"</span><span class="op">)</span>,</span>
<span>  rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">logs</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; hello world</span></span></code></pre>
<pre><code><span><span class="co">## O&gt; hello world</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="networks">Networks<a class="anchor" aria-label="anchor" href="#networks"></a>
</h2>
<p>Docker “networks” make it easy to get containers communicating with
each other without exposing ports to the host. To achive this, one
creates a docker network, then create containers attached to that
network (containers can also be attached to networks after
creation).</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">network</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"mynetwork"</span><span class="op">)</span></span></code></pre></div>
<p>Networks can be listed:</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">network</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        name</span></span>
<span><span class="co">## 1      host</span></span>
<span><span class="co">## 2 mynetwork</span></span>
<span><span class="co">## 3      none</span></span>
<span><span class="co">## 4    bridge</span></span>
<span><span class="co">##                                                                 id</span></span>
<span><span class="co">## 1 d5a076bd27b8f3a0963da06b5c149e6e7ab63ebe5649e124fdf8a22602b215c2</span></span>
<span><span class="co">## 2 05492a54216e3b100caa82959b714897dd10dd0292ae82f730328c2d6d29b1bb</span></span>
<span><span class="co">## 3 80bf98ad0e7fac320903a891936aa9680462769b37168e38b483c7ff9612bb2c</span></span>
<span><span class="co">## 4 8b98e06edb0adb42f306a3d86d2f4f3d62b7a9d15279d7c44d37908c120df1ac</span></span>
<span><span class="co">##                          created scope driver enable_ipv6         ipam</span></span>
<span><span class="co">## 1 2019-03-09T11:06:26.652857909Z local   host       FALSE default,....</span></span>
<span><span class="co">## 2   2020-01-12T10:05:50.1991445Z local bridge       FALSE default,....</span></span>
<span><span class="co">## 3 2019-03-09T11:06:26.606552055Z local   null       FALSE default,....</span></span>
<span><span class="co">## 4 2020-01-10T06:57:36.297181373Z local bridge       FALSE default,....</span></span>
<span><span class="co">##   internal attachable ingress containers      options labels</span></span>
<span><span class="co">## 1    FALSE      FALSE   FALSE</span></span>
<span><span class="co">## 2    FALSE      FALSE   FALSE</span></span>
<span><span class="co">## 3    FALSE      FALSE   FALSE</span></span>
<span><span class="co">## 4    FALSE      FALSE   FALSE            true, tr....</span></span></code></pre>
<p>The networks <code>bridge</code>, <code>host</code> and
<code>none</code> always exist - they are special to docker.</p>
<div class="section level3">
<h3 id="working-with-network-objects">Working with network objects<a class="anchor" aria-label="anchor" href="#working-with-network-objects"></a>
</h3>
<p>Like volume objects, network objects do very little themselves:</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;docker_network&gt;</span></span>
<span><span class="co">##   connect(container = NULL, endpoint_config = NULL)</span></span>
<span><span class="co">##   containers(reload = TRUE)</span></span>
<span><span class="co">##   disconnect(container = NULL, force = NULL)</span></span>
<span><span class="co">##   help(help_type = getOption("help_type"))</span></span>
<span><span class="co">##   id()</span></span>
<span><span class="co">##   inspect(reload = TRUE)</span></span>
<span><span class="co">##   name(reload = TRUE)</span></span>
<span><span class="co">##   reload()</span></span>
<span><span class="co">##   remove()</span></span></code></pre>
<p>The <code>$name()</code> and <code>$id()</code> methods get the name
and id of the network</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">name</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "mynetwork"</span></span></code></pre>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">id</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "05492a54216e3b100caa82959b714897dd10dd0292ae82f730328c2d6d29b1bb"</span></span></code></pre>
<p><code>$inspect()</code> gets detailed metadata</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">inspect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $name</span></span>
<span><span class="co">## [1] "mynetwork"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $id</span></span>
<span><span class="co">## [1] "05492a54216e3b100caa82959b714897dd10dd0292ae82f730328c2d6d29b1bb"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2020-01-12T10:05:50.1991445Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $scope</span></span>
<span><span class="co">## [1] "local"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver</span></span>
<span><span class="co">## [1] "bridge"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $enable_ipv6</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $ipam</span></span>
<span><span class="co">## $ipam$driver</span></span>
<span><span class="co">## [1] "default"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $ipam$config</span></span>
<span><span class="co">## $ipam$config[[1]]</span></span>
<span><span class="co">##          subnet         gateway</span></span>
<span><span class="co">## "172.18.0.0/16"    "172.18.0.1"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $ipam$options</span></span>
<span><span class="co">## list()</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $internal</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $attachable</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $ingress</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containers</span></span>
<span><span class="co">## list()</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $options</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $labels</span></span>
<span><span class="co">## character(0)</span></span></code></pre>
<p><code>$containers()</code> lists containers attached to the network
(currently an empty list - this network has no attached containers)</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">containers</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## list()</span></span></code></pre>
<p><code>$remove()</code> removes the network</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<p>Generally you’ll want to put containers onto a network.</p>
<p>The setup here is to create a network, and then use the
<code>network</code> argument to <code>$container$run()</code> to attach
a container to that network. Once established, containers on the same
network can use another docker container’s name as the hostname and
communicate!</p>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">network</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="st">"mynetwork"</span><span class="op">)</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"nginx"</span>, network <span class="op">=</span> <span class="va">nw</span>, name <span class="op">=</span> <span class="st">"server"</span>,</span>
<span>                               detach <span class="op">=</span> <span class="cn">TRUE</span>, rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">server</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "running"</span></span></code></pre>
<p>Now we can attach other networks to this container and communicate
with the server:</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"alpine:latest"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="st">"server"</span>, <span class="st">"-c"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>                     network <span class="op">=</span> <span class="va">nw</span>, stream <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout</a></span><span class="op">(</span><span class="op">)</span>, rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; PING server (172.19.0.2): 56 data bytes</span></span>
<span><span class="co">## O&gt; 64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.099 ms</span></span>
<span><span class="co">## O&gt; 64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.208 ms</span></span>
<span><span class="co">## O&gt; 64 bytes from 172.19.0.2: seq=2 ttl=64 time=0.228 ms</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; --- server ping statistics ---</span></span>
<span><span class="co">## O&gt; 3 packets transmitted, 3 packets received, 0% packet loss</span></span>
<span><span class="co">## O&gt; round-trip min/avg/max = 0.099/0.178/0.228 ms</span></span></code></pre>
<pre><code><span><span class="co">## &lt;docker_run_output&gt;</span></span>
<span><span class="co">##   $container:</span></span>
<span><span class="co">##     &lt;docker_container&gt;</span></span>
<span><span class="co">##       id: 36ee5c4501190e86eac95a52284cbfd69a22fe74d95088773f41627e3dc57c93</span></span>
<span><span class="co">##       name: agitated_pasteur</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##   $logs:</span></span>
<span><span class="co">##     O&gt; PING server (172.19.0.2): 56 data bytes</span></span>
<span><span class="co">##     O&gt; 64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.099 ms</span></span>
<span><span class="co">##     O&gt; 64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.208 ms</span></span>
<span><span class="co">##     O&gt; 64 bytes from 172.19.0.2: seq=2 ttl=64 time=0.228 ms</span></span>
<span><span class="co">##     O&gt;</span></span>
<span><span class="co">##     O&gt; --- server ping statistics ---</span></span>
<span><span class="co">##     O&gt; 3 packets transmitted, 3 packets received, 0% packet loss</span></span>
<span><span class="co">##     O&gt; round-trip min/avg/max = 0.099/0.178/0.228 ms</span></span></code></pre>
<p>Omitting the <code>network</code> argument, the second container
can’t find the server:</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"alpine:latest"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="st">"server"</span>, <span class="st">"-c"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>                     stream <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout</a></span><span class="op">(</span><span class="op">)</span>, rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## E&gt; ping: bad address 'server'</span></span></code></pre>
<pre><code><span><span class="co">## Error: Command 'ping server -c 3' in image 'alpine:latest' returned non-zero exit status 1</span></span>
<span><span class="co">## ping: bad address 'server'</span></span></code></pre>
<p>The server container exposes a webserver on port 80. For containers
on the network we can access this port:</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">docker</span><span class="op">$</span><span class="va">container</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="st">"richfitz/curl"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"curl"</span>, <span class="st">"-s"</span>, <span class="st">"http://server"</span><span class="op">)</span>,</span>
<span>                            network <span class="op">=</span> <span class="va">nw</span>, rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## O&gt; &lt;!DOCTYPE html&gt;</span></span>
<span><span class="co">## O&gt; &lt;html&gt;</span></span>
<span><span class="co">## O&gt; &lt;head&gt;</span></span>
<span><span class="co">## O&gt; &lt;title&gt;Welcome to nginx!&lt;/title&gt;</span></span>
<span><span class="co">## O&gt; &lt;style&gt;</span></span>
<span><span class="co">## O&gt;     body {</span></span>
<span><span class="co">## O&gt;         width: 35em;</span></span>
<span><span class="co">## O&gt;         margin: 0 auto;</span></span>
<span><span class="co">## O&gt;         font-family: Tahoma, Verdana, Arial, sans-serif;</span></span>
<span><span class="co">## O&gt;     }</span></span>
<span><span class="co">## O&gt; &lt;/style&gt;</span></span>
<span><span class="co">## O&gt; &lt;/head&gt;</span></span>
<span><span class="co">## O&gt; &lt;body&gt;</span></span>
<span><span class="co">## O&gt; &lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span></span>
<span><span class="co">## O&gt; &lt;p&gt;If you see this page, the nginx web server is successfully installed and</span></span>
<span><span class="co">## O&gt; working. Further configuration is required.&lt;/p&gt;</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; &lt;p&gt;For online documentation and support please refer to</span></span>
<span><span class="co">## O&gt; &lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span></span>
<span><span class="co">## O&gt; Commercial support is available at</span></span>
<span><span class="co">## O&gt; &lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span></span>
<span><span class="co">## O&gt;</span></span>
<span><span class="co">## O&gt; &lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span></span>
<span><span class="co">## O&gt; &lt;/body&gt;</span></span>
<span><span class="co">## O&gt; &lt;/html&gt;</span></span></code></pre>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">logs</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "&lt;!DOCTYPE html&gt;\n"</span></span>
<span><span class="co">##  [2] "&lt;html&gt;\n"</span></span>
<span><span class="co">##  [3] "&lt;head&gt;\n"</span></span>
<span><span class="co">##  [4] "&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n"</span></span>
<span><span class="co">##  [5] "&lt;style&gt;\n"</span></span>
<span><span class="co">##  [6] "    body {\n"</span></span>
<span><span class="co">##  [7] "        width: 35em;\n"</span></span>
<span><span class="co">##  [8] "        margin: 0 auto;\n"</span></span>
<span><span class="co">##  [9] "        font-family: Tahoma, Verdana, Arial, sans-serif;\n"</span></span>
<span><span class="co">## [10] "    }\n"</span></span></code></pre>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nw</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="other-docker-functions">Other docker functions<a class="anchor" aria-label="anchor" href="#other-docker-functions"></a>
</h2>
<p>There are a few functions at the top level of the
<code>docker_client</code> object:</p>
<p><code>$ping()</code> tests the connection to the server and reports
the API version for the server - this is a (for docker) very fast
function to use to test that things seem to be working.</p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="fu">ping</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "OK"</span></span>
<span><span class="co">## attr(,"api_version")</span></span>
<span><span class="co">## [1] "1.39"</span></span>
<span><span class="co">## attr(,"buildkit_version")</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">## attr(,"docker_experimental")</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre>
<p><code>$api_version()</code> reports the API version that the
<em>client</em> is using (this can be varied from 1.25 to 1.39)</p>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="fu">api_version</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "1.39"</span></span></code></pre>
<p><code>$version()</code> reports detailed version information from the
server:</p>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="fu">version</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $platform</span></span>
<span><span class="co">## $platform$name</span></span>
<span><span class="co">## [1] "Docker Engine - Community"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $components</span></span>
<span><span class="co">##     name version      details</span></span>
<span><span class="co">## 1 Engine 18.09.2 1.39, am....</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $version</span></span>
<span><span class="co">## [1] "18.09.2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $api_version</span></span>
<span><span class="co">## [1] "1.39"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $min_api_version</span></span>
<span><span class="co">## [1] "1.12"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $git_commit</span></span>
<span><span class="co">## [1] "6247962"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $go_version</span></span>
<span><span class="co">## [1] "go1.10.6"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $os</span></span>
<span><span class="co">## [1] "linux"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $arch</span></span>
<span><span class="co">## [1] "amd64"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $kernel_version</span></span>
<span><span class="co">## [1] "4.9.125-linuxkit"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $experimental</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $build_time</span></span>
<span><span class="co">## [1] "2019-02-10T04:13:06.000000000+00:00"</span></span></code></pre>
<p><code>$info()</code> reports a bunch of other information about the
state of the server (Docker describes this as “get system information”
in its documentation) - this is equivalent to running
<code>docker info</code></p>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">docker</span><span class="op">$</span><span class="fu">info</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "54B2:VUDF:CFVG:KTXY:5ZI6:S7NK:LQNM:7CFA:X6TH:5PRV:SUFC:ZDK4"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containers</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containers_running</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containers_paused</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containers_stopped</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $images</span></span>
<span><span class="co">## [1] 73</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver</span></span>
<span><span class="co">## [1] "overlay2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver_status</span></span>
<span><span class="co">## $driver_status[[1]]</span></span>
<span><span class="co">## [1] "Backing Filesystem" "extfs"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver_status[[2]]</span></span>
<span><span class="co">## [1] "Supports d_type" "true"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $driver_status[[3]]</span></span>
<span><span class="co">## [1] "Native Overlay Diff" "true"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $docker_root_dir</span></span>
<span><span class="co">## [1] "/var/lib/docker"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $system_status</span></span>
<span><span class="co">## list()</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $plugins</span></span>
<span><span class="co">## $plugins$volume</span></span>
<span><span class="co">## [1] "local"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $plugins$network</span></span>
<span><span class="co">## [1] "bridge"  "host"    "macvlan" "null"    "overlay"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $plugins$authorization</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $plugins$log</span></span>
<span><span class="co">##  [1] "awslogs"    "fluentd"    "gcplogs"    "gelf"       "journald"</span></span>
<span><span class="co">##  [6] "json-file"  "local"      "logentries" "splunk"     "syslog"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $memory_limit</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swap_limit</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $kernel_memory</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cpu_cfs_period</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cpu_cfs_quota</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cpu_shares</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cpu_set</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $oom_kill_disable</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $ipv4_forwarding</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $bridge_nf_iptables</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $bridge_nf_ip6tables</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $debug</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $n_fd</span></span>
<span><span class="co">## [1] 26</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $n_goroutines</span></span>
<span><span class="co">## [1] 53</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $system_time</span></span>
<span><span class="co">## [1] "2020-01-12T10:06:01.1253405Z"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $logging_driver</span></span>
<span><span class="co">## [1] "json-file"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cgroup_driver</span></span>
<span><span class="co">## [1] "cgroupfs"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $n_events_listener</span></span>
<span><span class="co">## [1] 2</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $kernel_version</span></span>
<span><span class="co">## [1] "4.9.125-linuxkit"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $operating_system</span></span>
<span><span class="co">## [1] "Docker for Mac"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $os_type</span></span>
<span><span class="co">## [1] "linux"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $architecture</span></span>
<span><span class="co">## [1] "x86_64"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $n_cpu</span></span>
<span><span class="co">## [1] 2</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $mem_total</span></span>
<span><span class="co">## [1] 2096164864</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $index_server_address</span></span>
<span><span class="co">## [1] "https://index.docker.io/v1/"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config</span></span>
<span><span class="co">## $registry_config$allow_nondistributable_artifacts_cidrs</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$allow_nondistributable_artifacts_hostnames</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$insecure_registry_cidrs</span></span>
<span><span class="co">## [1] "127.0.0.0/8"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$index_configs</span></span>
<span><span class="co">## $registry_config$index_configs$docker.io</span></span>
<span><span class="co">## $registry_config$index_configs$docker.io$name</span></span>
<span><span class="co">## [1] "docker.io"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$index_configs$docker.io$mirrors</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$index_configs$docker.io$secure</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$index_configs$docker.io$official</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $registry_config$mirrors</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $generic_resources</span></span>
<span><span class="co">## [1] named_resource_spec    discrete_resource_spec</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $http_proxy</span></span>
<span><span class="co">## [1] "gateway.docker.internal:3128"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $https_proxy</span></span>
<span><span class="co">## [1] "gateway.docker.internal:3129"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $no_proxy</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $name</span></span>
<span><span class="co">## [1] "linuxkit-025000000001"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $labels</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $experimental_build</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $server_version</span></span>
<span><span class="co">## [1] "18.09.2"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cluster_store</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $cluster_advertise</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $runtimes</span></span>
<span><span class="co">## $runtimes$runc</span></span>
<span><span class="co">## $runtimes$runc$path</span></span>
<span><span class="co">## [1] "runc"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $runtimes$runc$runtime_args</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $default_runtime</span></span>
<span><span class="co">## [1] "runc"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm</span></span>
<span><span class="co">## $swarm$node_id</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$node_addr</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$local_node_state</span></span>
<span><span class="co">## [1] "inactive"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$control_available</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$error</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$remote_managers</span></span>
<span><span class="co">## [1] node_id addr</span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$nodes</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$managers</span></span>
<span><span class="co">## [1] NA</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $swarm$cluster</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $live_restore_enabled</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $isolation</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $init_binary</span></span>
<span><span class="co">## [1] "docker-init"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containerd_commit</span></span>
<span><span class="co">## $containerd_commit$id</span></span>
<span><span class="co">## [1] "9754871865f7fe2f4e74d43e2fc7ccd237edcbce"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $containerd_commit$expected</span></span>
<span><span class="co">## [1] "9754871865f7fe2f4e74d43e2fc7ccd237edcbce"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $runc_commit</span></span>
<span><span class="co">## $runc_commit$id</span></span>
<span><span class="co">## [1] "09c8266bf2fcf9519a651b04ae54c967b9ab86ec"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $runc_commit$expected</span></span>
<span><span class="co">## [1] "09c8266bf2fcf9519a651b04ae54c967b9ab86ec"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $init_commit</span></span>
<span><span class="co">## $init_commit$id</span></span>
<span><span class="co">## [1] "fec3683"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $init_commit$expected</span></span>
<span><span class="co">## [1] "fec3683"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $security_options</span></span>
<span><span class="co">## [1] "name=seccomp,profile=default"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $product_license</span></span>
<span><span class="co">## [1] "Community Engine"</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## $warnings</span></span>
<span><span class="co">## character(0)</span></span></code></pre>
<p>Finally, <code>$df()</code> will return information about resource
and data usage by docker - all containers, networks, volumes, etc.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
