<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Constructors for complex types — docker_types • stevedore</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Constructors for complex types — docker_types"><meta property="og:description" content="Methods for building complex docker types.  This is most objects
more complicated than R's atomic types.  Most functions will
indicate if they require one of these objects in their help.  None
of these functions do anything interesting in their own regard -
they just validate inputs."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stevedore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/stevedore.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cookbook.html">Cookbook</a>
    </li>
    <li>
      <a href="../articles/examples.html">Examples and use-cases</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/richfitz/stevedore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Constructors for complex types</h1>
    <small class="dont-index">Source: <a href="https://github.com/richfitz/stevedore/blob/HEAD/R/help.R" class="external-link"><code>R/help.R</code></a></small>
    <div class="hidden name"><code>docker_types.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Methods for building complex docker types.  This is most objects
more complicated than R's atomic types.  Most functions will
indicate if they require one of these objects in their help.  None
of these functions do anything interesting in their own regard -
they just validate inputs.</p>
    </div>


    <div id="details">
    <h2>Details</h2>
    <p>The functions here will all depend on the API versions - some of
the most fluid parts of the docker API are the different options
that are supported via things like <code>host_config</code>.</p>
<p>These functions are needed because <code>stevedore</code> aims to be a
fairly direct wrapping around the docker API.  For most of the
single host methods the types here are not really used (with the
notable exception of <code>host_config</code> which is used by
<code>$container$create</code> and <code>$container$update</code>).  But for
the swarm endpoints the function definitions would be impossibly
complex if we did not reflect the types.  So rather than one
function call with a hundred arguments, we can build up the
required types.</p>
<p>Below is reference documentation for all methods for version
'1.29'
of the docker API - other versions are available. This documentation
is automatically generated from docker's API schema, and so
inaccuracies may exist between it and stevedore's interface
(especially references to JSON objects). Please report any
documentation that might be improved at
<a href="https://github.com/richfitz/stevedore/issues" class="external-link">https://github.com/richfitz/stevedore/issues</a></p><div class="section">
<h3 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h3><dl><dt><code>container_spec</code></dt>
<dd><p>container_spec</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">container_spec</span><span class="op">(</span>image <span class="op">=</span> <span class="cn">NULL</span>, labels <span class="op">=</span> <span class="cn">NULL</span>, command <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      args <span class="op">=</span> <span class="cn">NULL</span>, hostname <span class="op">=</span> <span class="cn">NULL</span>, env <span class="op">=</span> <span class="cn">NULL</span>, dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      user <span class="op">=</span> <span class="cn">NULL</span>, groups <span class="op">=</span> <span class="cn">NULL</span>, tty <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      open_stdin <span class="op">=</span> <span class="cn">NULL</span>, read_only <span class="op">=</span> <span class="cn">NULL</span>, mounts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      stop_signal <span class="op">=</span> <span class="cn">NULL</span>, stop_grace_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      health_check <span class="op">=</span> <span class="cn">NULL</span>, hosts <span class="op">=</span> <span class="cn">NULL</span>, dns_config <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      secrets <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>image</code>: The image name to use for the container.</p></li>
<li><p><code>labels</code>: User-defined key/value data.</p></li>
<li><p><code>command</code>: The command to be run in the image.</p></li>
<li><p><code>args</code>: Arguments to the command.</p></li>
<li><p><code>hostname</code>: The hostname to use for the container, as a valid RFC 1123 hostname.</p></li>
<li><p><code>env</code>: A list of environment variables in the form <code>VAR=value</code>.</p></li>
<li><p><code>dir</code>: The working directory for commands to run in.</p></li>
<li><p><code>user</code>: The user inside the container.</p></li>
<li><p><code>groups</code>: A list of additional groups that the container process will run as.</p></li>
<li><p><code>tty</code>: Whether a pseudo-TTY should be allocated.</p></li>
<li><p><code>open_stdin</code>: Open <code>stdin</code></p></li>
<li><p><code>read_only</code>: Mount the container's root filesystem as read only.</p></li>
<li><p><code>mounts</code>: Specification for mounts to be added to containers created as part of the service.</p></li>
<li><p><code>stop_signal</code>: Signal to stop the container.</p></li>
<li><p><code>stop_grace_period</code>: Amount of time to wait for the container to terminate before forcefully killing it.</p></li>
<li><p><code>health_check</code>: A test to perform to check that the container is healthy. Construct with <code>$types$health_config()</code></p></li>
<li><p><code>hosts</code>: A list of hostnames/IP mappings to add to the container's <code>/etc/hosts</code> file.
The format of extra hosts on swarmkit is specified in:
http://man7.org/linux/man-pages/man5/hosts.5.html
  IP_address canonical_hostname [aliases...]</p></li>
<li><p><code>dns_config</code>: Specification for DNS related configurations in resolver configuration file (<code>resolv.conf</code>). Construct with <code>$types$dns_config()</code></p></li>
<li><p><code>secrets</code>: Secrets contains references to zero or more secrets that will be exposed to the service.</p></li>
</ul></dd><dt><code>dns_config</code></dt>
<dd><p>Specification for DNS related configurations in resolver configuration file (<code>resolv.conf</code>).</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">dns_config</span><span class="op">(</span>nameservers <span class="op">=</span> <span class="cn">NULL</span>, search <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      options <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>nameservers</code>: The IP addresses of the name servers.</p></li>
<li><p><code>search</code>: A search list for host-name lookup.</p></li>
<li><p><code>options</code>: A list of internal resolver variables to be modified (e.g., <code>debug</code>, <code>ndots:3</code>, etc.).</p></li>
</ul></dd><dt><code>health_config</code></dt>
<dd><p>A test to perform to check that the container is healthy.</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">health_config</span><span class="op">(</span>test <span class="op">=</span> <span class="cn">NULL</span>, interval <span class="op">=</span> <span class="cn">NULL</span>, timeout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      retries <span class="op">=</span> <span class="cn">NULL</span>, start_period <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>test</code>: The test to perform. Possible values are:</p><ul><li><p><code>[]</code> inherit healthcheck from image or parent image</p></li>
<li><p><code>["NONE"]</code> disable healthcheck</p></li>
<li><p><code>["CMD", args...]</code> exec arguments directly</p></li>
<li><p><code>["CMD-SHELL", command]</code> run command with system's default shell</p></li>
</ul></li>
<li><p><code>interval</code>: The time to wait between checks in nanoseconds. It should be 0 or not less than 1000000000(1s). 0 means inherit.</p></li>
<li><p><code>timeout</code>: The time to wait before considering the check to have hung. It should be 0 or not less than 1000000000(1s). 0 means inherit.</p></li>
<li><p><code>retries</code>: The number of consecutive failures needed to consider a container as unhealthy. 0 means inherit.</p></li>
<li><p><code>start_period</code>: Start period for the container to initialize before starting health-retries countdown in nanoseconds. 0 means inherit.</p></li>
</ul></dd><dt><code>help</code></dt>
<dd><p>Display help for this object</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span>help_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"help_type"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>help_type</code>: Passed to <code><a href="https://rdrr.io/r/utils/help.html" class="external-link">utils::help</a></code>, can be one of "text", "html" or "pdf" (or an abbreviation).  By default it uses the value <code>getOption("help_type")</code> and should follow the same behaviour as other R help (e.g., using "?")</p></li>
</ul></dd><dt><code>mount</code></dt>
<dd><p>mount</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">mount</span><span class="op">(</span>target <span class="op">=</span> <span class="cn">NULL</span>, source <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      read_only <span class="op">=</span> <span class="cn">NULL</span>, consistency <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      bind_options <span class="op">=</span> <span class="cn">NULL</span>, volume_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      tmpfs_options <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>target</code>: Container path.</p></li>
<li><p><code>source</code>: Mount source (e.g. a volume name, a host path).</p></li>
<li><p><code>type</code>: The mount type. Available types:</p><ul><li><p><code>bind</code> Mounts a file or directory from the host into the container. Must exist prior to creating the container.</p></li>
<li><p><code>volume</code> Creates a volume with the given name and options (or uses a pre-existing volume with the same name and options). These are <b>not</b> removed when the container is removed.</p></li>
<li><p><code>tmpfs</code> Create a tmpfs with the given options. The mount source cannot be specified for tmpfs.</p></li>
</ul></li>
<li><p><code>read_only</code>: Whether the mount should be read-only.</p></li>
<li><p><code>consistency</code>: The consistency requirement for the mount: <code>default</code>, <code>consistent</code>, <code>cached</code>, or <code>delegated</code>.</p></li>
<li><p><code>bind_options</code>: Optional configuration for the <code>bind</code> type.</p></li>
<li><p><code>volume_options</code>: Optional configuration for the <code>volume</code> type.</p></li>
<li><p><code>tmpfs_options</code>: Optional configuration for the <code>tmpfs</code> type.</p></li>
</ul></dd><dt><code>task_placement</code></dt>
<dd><p>task_placement</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">task_placement</span><span class="op">(</span>constraints <span class="op">=</span> <span class="cn">NULL</span>, preferences <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>constraints</code>: An array of constraints.</p></li>
<li><p><code>preferences</code>: Preferences provide a way to make the scheduler aware of factors such as topology. They are provided in order from highest to lowest precedence.</p></li>
</ul></dd><dt><code>task_resources</code></dt>
<dd><p>Resource requirements which apply to each individual container created as part of the service.</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">task_resources</span><span class="op">(</span>limits <span class="op">=</span> <span class="cn">NULL</span>, reservation <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>limits</code>: Define resources limits.</p></li>
<li><p><code>reservation</code>: Define resources reservation.</p></li>
</ul></dd><dt><code>task_restart_policy</code></dt>
<dd><p>Specification for the restart policy which applies to containers created as part of this service.</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">task_restart_policy</span><span class="op">(</span>condition <span class="op">=</span> <span class="cn">NULL</span>, delay <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      max_attempts <span class="op">=</span> <span class="cn">NULL</span>, window <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>condition</code>: Condition for restart.</p></li>
<li><p><code>delay</code>: Delay between restart attempts.</p></li>
<li><p><code>max_attempts</code>: Maximum attempts to restart a given container before giving up (default value is 0, which is ignored).</p></li>
<li><p><code>window</code>: Windows is the time window used to evaluate the restart policy (default value is 0, which is unbounded).</p></li>
</ul></dd><dt><code>task_spec</code></dt>
<dd><p>User modifiable task configuration.</p>
<p><em>Usage:</em></p><div class="sourceCode"><pre><code><span>  <span class="fu">task_spec</span><span class="op">(</span>container_spec <span class="op">=</span> <span class="cn">NULL</span>, resources <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      restart_policy <span class="op">=</span> <span class="cn">NULL</span>, placement <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      force_update <span class="op">=</span> <span class="cn">NULL</span>, networks <span class="op">=</span> <span class="cn">NULL</span>, log_driver <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p><em>Arguments:</em></p><ul><li><p><code>container_spec</code>: Construct with <code>$types$container_spec()</code></p></li>
<li><p><code>resources</code>: Resource requirements which apply to each individual container created as part of the service. Construct with <code>$types$task_resources()</code></p></li>
<li><p><code>restart_policy</code>: Specification for the restart policy which applies to containers created as part of this service. Construct with <code>$types$task_restart_policy()</code></p></li>
<li><p><code>placement</code>: Construct with <code>$types$task_placement()</code></p></li>
<li><p><code>force_update</code>: A counter that triggers an update even if no relevant parameters have been changed.</p></li>
<li><p><code>networks</code>: NA</p></li>
<li><p><code>log_driver</code>: Specifies the log driver to use for tasks created from this spec. If not present, the default one for the swarm will be used, finally falling back to the engine default if not specified.</p></li>
</ul></dd></dl></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

